{% extends "/layout.html" %}

{% block body %}

<div class="container text-left">
    <div class="form-group">
        <form id="search">
            <input type="text" name="query" autofocus>
            <input type="submit" action="search_method" value="Boolean" name="search_method">
            <input type="submit" action="search_method" value="td-idf" name="search_method">
            <input type="submit" action="search_method" value="Third option" name="search_method">
        </form>
        <form id="show_all">
            <input type="submit" action="search_method" value="List all movies" name="search_method">
        </form>
    </div>

    {% if query %}
    <h2 class="h2">Your {{ method }} query "{{ query }}" matched {{ number }} movies:</h2>
    {% for item in final_result_list %}
    <p><a href="{{ url_for('show_movie', title=item.get_title(), id=item.get_id() )}}">{{ item.get_title() }}</a></p>
    <p>{{ item.get_summary() }}</p>
    <tr>
	<td><b>Themes: </b></td>
        {% for theme in item.get_themes() %}
        <td>{{ theme[1] }},</td>
        {% endfor %}
        <br><td><a class="show_more" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">Show/hide query matches</a></td>

  
<div class="collapse" id="collapseExample">
    <p>{{ item.get_synopsis() | safe }}</p>
  <!--<div class="card card-body">{{ item.get_synopsis() }}</div>-->
</div>


    </tr>
    <br><br>
    {% endfor %}

    {% else %}
    {% if method == 'List all movies'%}
    <h2 class="h2">List of all {{ number }} movies</h2>
    {% for item in final_result_list %}
    <p><a href="{{ url_for('show_movie', title=item.get_title(), id=item.get_id() )}}">{{ item.get_title() }}</a></p>
    <p>{{ item.get_summary() }}</p>
    <tr>
	<td><b>Themes: </b></td>
        {% for theme in item.get_themes() %}
        <td>{{ theme[1] }},</td>
        {% endfor %}
    </tr>
    <br><br>
    {% endfor %}
    {% endif %}
    {% if method == 'Boolean' or method == 'td-idf' %}
    <h2 class="h2">Write a search word</h2>
    {% endif %}
</div>
{% endif %}



{% endblock %}